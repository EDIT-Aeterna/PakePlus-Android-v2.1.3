{"message":"Not Found","documentation_url":"https://docs.github.com/rest/git/refs#get-all-references-in-a-namespace","status":"404","name":"eedffefbcebaa","url":"http://192.168.7.99:906/#/auth/login","showName":"StarERP","appid":"com.StarAirlines.StarERP","icon":"","iconPath":"","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":false,"version":"0.0.5","preview":"desktop","platform":["2-1"],"width":800,"height":600,"desc":"","jsFile":[],"filterCss":"","customJs":"// very important, if you don't know what it is, don't touch it\n// 非常重要，不懂代码不要动，这里可以解决80%的问题，也可以生产1000+的bug\n\n// 缩放比例常量\nconst ZOOM_LEVEL = 0.50;\n\n// 1. 页面启动时设置缩放比例为75%\nconst setDefaultZoom = () => {\n    console.log('Setting default zoom to 75%');\n    \n    // 方案：使用iframe包裹整个页面内容并缩放iframe\n    // 这种方法可以保持页面内容的原始坐标系统，避免滑块交互问题\n    \n    // 检查是否已经有缩放iframe\n    if (document.getElementById('zoom-iframe')) {\n        console.log('Zoom iframe already exists');\n        return;\n    }\n    \n    // 创建一个包含当前页面内容的新文档\n    const newDoc = document.implementation.createHTMLDocument('Zoomed Page');\n    \n    // 复制当前页面的所有内容\n    newDoc.documentElement.innerHTML = document.documentElement.innerHTML;\n    \n    // 创建iframe\n    const iframe = document.createElement('iframe');\n    iframe.id = 'zoom-iframe';\n    iframe.style.position = 'fixed';\n    iframe.style.top = '0';\n    iframe.style.left = '0';\n    iframe.style.border = 'none';\n    iframe.style.overflow = 'hidden';\n    iframe.style.zIndex = '9999';\n    iframe.style.background = 'white';\n    \n    // 设置iframe的缩放 - 确保全屏显示\n    iframe.style.transform = `scale(${ZOOM_LEVEL})`;\n    iframe.style.transformOrigin = 'top left';\n    \n    // 确保iframe占满整个视口\n    iframe.style.width = `${100 / ZOOM_LEVEL}vw`;\n    iframe.style.height = `${100 / ZOOM_LEVEL}vh`;\n    \n    // 移除可能存在的滚动条\n    document.documentElement.style.overflow = 'hidden';\n    document.body.style.overflow = 'hidden';\n    \n    // 重置margin和padding\n    document.body.style.margin = '0';\n    document.body.style.padding = '0';\n    document.body.style.width = '100vw';\n    document.body.style.height = '100vh';\n    \n    // 清空当前页面内容\n    document.body.innerHTML = '';\n    \n    // 添加iframe到页面\n    document.body.appendChild(iframe);\n    \n    // 将新文档加载到iframe中\n    iframe.contentDocument.open();\n    iframe.contentDocument.write(newDoc.documentElement.outerHTML);\n    iframe.contentDocument.close();\n    \n    // 等待iframe加载完成后处理链接\n    iframe.onload = () => {\n        console.log('Zoom iframe loaded');\n        \n        // 在iframe中重新应用链接处理功能\n        const iframeDoc = iframe.contentDocument;\n        \n        // 复制hookClick函数到iframe\n        iframe.contentWindow.hookClick = (e) => {\n            const origin = e.target.closest('a');\n            const isBaseTargetBlank = iframeDoc.querySelector(\n                'head base[target=\"_blank\"]'\n            );\n            console.log('origin', origin, isBaseTargetBlank);\n            if (\n                (origin && origin.href && origin.target === '_blank') ||\n                (origin && origin.href && isBaseTargetBlank)\n            ) {\n                e.preventDefault();\n                console.log('handle origin', origin);\n                iframe.contentWindow.location.href = origin.href;\n            } else {\n                console.log('not handle origin', origin);\n            }\n        };\n        \n        // 添加点击事件监听器\n        iframeDoc.addEventListener('click', iframe.contentWindow.hookClick, { capture: true });\n        \n        // 重写iframe的window.open方法\n        iframe.contentWindow.open = function (url, target, features) {\n            console.log('iframe open', url, target, features);\n            iframe.contentWindow.location.href = url;\n        };\n    };\n    \n    // 监听窗口大小变化，确保iframe仍能正确全屏显示\n    window.addEventListener('resize', () => {\n        console.log('Window resized, updating iframe size');\n        iframe.style.width = `${100 / ZOOM_LEVEL}vw`;\n        iframe.style.height = `${100 / ZOOM_LEVEL}vh`;\n    });\n    \n    console.log('Zoom iframe applied successfully');\n}\n\n// 2. 链接点击事件处理函数\nconst hookClick = (e) => {\n    const origin = e.target.closest('a')\n    const isBaseTargetBlank = document.querySelector(\n        'head base[target=\"_blank\"]'\n    )\n    console.log('origin', origin, isBaseTargetBlank)\n    if (\n        (origin && origin.href && origin.target === '_blank') ||\n        (origin && origin.href && isBaseTargetBlank)\n    ) {\n        e.preventDefault()\n        console.log('handle origin', origin)\n        location.href = origin.href\n    } else {\n        console.log('not handle origin', origin)\n    }\n}\n\n// 3. 重写window.open方法\nwindow.open = function (url, target, features) {\n    console.log('open', url, target, features)\n    location.href = url\n}\n\n\n\n// 4. 事件监听器设置\n// 设置页面加载完成后执行缩放\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', setDefaultZoom)\n} else {\n    setDefaultZoom()\n}\n\n// 4. 增强的滑块交互修复（针对iframe环境）\nconst fixZoomedControls = () => {\n    console.log('Fixing zoomed controls');\n    \n    // 获取主页面和iframe中的滑块元素\n    const sliderElements = document.querySelectorAll('input[type=\"range\"], .slider, .range-slider');\n    \n    // 为每个滑块添加正确的事件处理\n    sliderElements.forEach(slider => {\n        // 标记是否正在拖拽\n        let isDragging = false;\n        \n        // 移除可能存在的旧监听器\n        slider.onmousedown = null;\n        slider.onmousemove = null;\n        slider.onmouseup = null;\n        slider.ontouchstart = null;\n        slider.ontouchmove = null;\n        slider.ontouchend = null;\n        \n        // 鼠标事件\n        slider.addEventListener('mousedown', (e) => {\n            isDragging = true;\n            slider.classList.add('dragging');\n        });\n        \n        document.addEventListener('mousemove', (e) => {\n            if (!isDragging) return;\n            \n            // 计算滑块位置 - 在iframe环境下，使用原始坐标系统\n            const rect = slider.getBoundingClientRect();\n            const percentage = (e.clientX - rect.left) / rect.width;\n            const min = parseFloat(slider.min || 0);\n            const max = parseFloat(slider.max || 100);\n            const value = min + (percentage * (max - min));\n            \n            // 设置滑块值\n            slider.value = Math.max(min, Math.min(max, value));\n            \n            // 触发input事件\n            slider.dispatchEvent(new Event('input'));\n        });\n        \n        document.addEventListener('mouseup', () => {\n            if (isDragging) {\n                isDragging = false;\n                slider.classList.remove('dragging');\n                // 触发change事件\n                slider.dispatchEvent(new Event('change'));\n            }\n        });\n        \n        // 触摸事件\n        slider.addEventListener('touchstart', (e) => {\n            isDragging = true;\n            slider.classList.add('dragging');\n            e.preventDefault();\n        });\n        \n        document.addEventListener('touchmove', (e) => {\n            if (!isDragging) return;\n            \n            const touch = e.touches[0];\n            // 计算滑块位置 - 在iframe环境下，使用原始坐标系统\n            const rect = slider.getBoundingClientRect();\n            const percentage = (touch.clientX - rect.left) / rect.width;\n            const min = parseFloat(slider.min || 0);\n            const max = parseFloat(slider.max || 100);\n            const value = min + (percentage * (max - min));\n            \n            // 设置滑块值\n            slider.value = Math.max(min, Math.min(max, value));\n            \n            // 触发input事件\n            slider.dispatchEvent(new Event('input'));\n            \n            e.preventDefault();\n        });\n        \n        document.addEventListener('touchend', () => {\n            if (isDragging) {\n                isDragging = false;\n                slider.classList.remove('dragging');\n                // 触发change事件\n                slider.dispatchEvent(new Event('change'));\n            }\n        });\n    });\n    \n    // 同时处理iframe内部的滑块\n    const iframe = document.getElementById('zoom-iframe');\n    if (iframe && iframe.contentDocument) {\n        console.log('Fixing controls inside iframe');\n        const iframeDoc = iframe.contentDocument;\n        const iframeSliders = iframeDoc.querySelectorAll('input[type=\"range\"], .slider, .range-slider');\n        \n        iframeSliders.forEach(slider => {\n            // 标记是否正在拖拽\n            let isDragging = false;\n            \n            // 移除可能存在的旧监听器\n            slider.onmousedown = null;\n            slider.onmousemove = null;\n            slider.onmouseup = null;\n            slider.ontouchstart = null;\n            slider.ontouchmove = null;\n            slider.ontouchend = null;\n            \n            // 鼠标事件\n            slider.addEventListener('mousedown', (e) => {\n                isDragging = true;\n                slider.classList.add('dragging');\n            });\n            \n            iframeDoc.addEventListener('mousemove', (e) => {\n                if (!isDragging) return;\n                \n                // 计算滑块位置 - 在iframe内部，使用原始坐标系统\n                const rect = slider.getBoundingClientRect();\n                const percentage = (e.clientX - rect.left) / rect.width;\n                const min = parseFloat(slider.min || 0);\n                const max = parseFloat(slider.max || 100);\n                const value = min + (percentage * (max - min));\n                \n                // 设置滑块值\n                slider.value = Math.max(min, Math.min(max, value));\n                \n                // 触发input事件\n                slider.dispatchEvent(new Event('input'));\n            });\n            \n            iframeDoc.addEventListener('mouseup', () => {\n                if (isDragging) {\n                    isDragging = false;\n                    slider.classList.remove('dragging');\n                    // 触发change事件\n                    slider.dispatchEvent(new Event('change'));\n                }\n            });\n            \n            // 触摸事件\n            slider.addEventListener('touchstart', (e) => {\n                isDragging = true;\n                slider.classList.add('dragging');\n                e.preventDefault();\n            });\n            \n            iframeDoc.addEventListener('touchmove', (e) => {\n                if (!isDragging) return;\n                \n                const touch = e.touches[0];\n                // 计算滑块位置 - 在iframe内部，使用原始坐标系统\n                const rect = slider.getBoundingClientRect();\n                const percentage = (touch.clientX - rect.left) / rect.width;\n                const min = parseFloat(slider.min || 0);\n                const max = parseFloat(slider.max || 100);\n                const value = min + (percentage * (max - min));\n                \n                // 设置滑块值\n                slider.value = Math.max(min, Math.min(max, value));\n                \n                // 触发input事件\n                slider.dispatchEvent(new Event('input'));\n                \n                e.preventDefault();\n            });\n            \n            iframeDoc.addEventListener('touchend', () => {\n                if (isDragging) {\n                    isDragging = false;\n                    slider.classList.remove('dragging');\n                    // 触发change事件\n                    slider.dispatchEvent(new Event('change'));\n                }\n            });\n        });\n    }\n}\n\n// 添加点击事件监听器\ndocument.addEventListener('click', hookClick, { capture: true });\n\n// 页面加载完成后修复控件交互问题\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => {\n        // 等待缩放完成后再修复控件\n        setTimeout(fixZoomedControls, 200);\n    });\n} else {\n    setTimeout(fixZoomedControls, 200);\n}","isHtml":false,"htmlPath":"","htmlFiles":[],"prefix":"","pcRepo":"PakePlus-v2.1.3","iosRepo":"PakePlus-iOS-v2.1.3","androidRepo":"PakePlus-Android-v2.1.3","more":{"windows":{"label":"eedffefbcebaa","title":"StarERP","url":"http://192.168.7.99:906/#/auth/login","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36","width":800,"height":600,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"shadow":true,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false,"backgroundColor":null,"backgroundThrottling":null,"javascriptDisabled":false}},"phone":{"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"eedffefbcebaa","showName":"StarERP","version":"0.0.5","webUrl":"http://192.168.7.99:906/#/auth/login","id":"com.StarAirlines.StarERP.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false,"safeArea":"all"},"android":{"name":"eedffefbcebaa","showName":"StarERP","version":"0.0.5","webUrl":"http://192.168.7.99:906/#/auth/login","id":"com.StarAirlines.StarERP.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false,"safeArea":"all"},"desktop":{"name":"eedffefbcebaa","showName":"StarERP","version":"0.0.5","id":"com.StarAirlines.StarERP.desktop","desc":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","webUrl":"http://192.168.7.99:906/#/auth/login","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","isHtml":false,"single":true,"state":true,"injectJq":false,"tauriApi":false,"buildMethod":"local","debug":false}}